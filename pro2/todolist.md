# 项目开发要求：公司人员和薪酬管理简易程序

## 1. 项目概述

### 1.1 项目名称
公司人员和薪酬管理简易程序（简称“薪酬管理系统”）。

### 1.2 项目背景
本项目是为小型公司财务部门设计和开发的一个简易管理系统，旨在简化公司薪资发放流程并提供直观的工资统计报表。该系统针对公司内部的员工薪酬计算和统计需求，适用于员工规模较小（例如数十人以内）的企业。通过该系统，财务人员可以高效地录入员工信息、计算月薪、发放薪资，并生成汇总报表，从而减少手动计算错误，提高工作效率。

**目标用户**：公司财务部门人员（主要为财务专员或会计），无需高级编程知识，只需通过命令行界面操作。

**项目意义**：
- 解决传统手工记账或Excel管理的痛点，如计算复杂、易出错、报表生成耗时。
- 作为软件工程初级实训项目，旨在实践面向对象编程（OOP）核心概念，包括类封装、继承、多态、虚函数和STL容器使用。
- 强调代码的模块化、可扩展性和可维护性，为后续扩展（如添加更多员工类型或集成数据库）奠定基础。

### 1.3 项目范围
- **纳入范围**：员工信息录入、薪资计算、月薪发放、工资报表生成、数据持久化（文件存储）。
- **排除范围**：不涉及网络功能、图形用户界面（GUI）、实时在线协作、多用户权限管理或高级报表导出（如PDF/Excel）。系统为单机命令行应用。

### 1.4 项目约束
- 开发语言：C++（使用Dev C++ IDE）。
- 数据存储：使用文件（.txt或.csv）方式持久化员工数据，不使用数据库。
- 员工类型：仅支持四类（经理、技术人员、销售经理、推销员）。
- 编号规则：员工编号从2001开始，自动递增。

## 2. 业务需求和功能规格

### 2.1 业务场景
小型公司员工分为四类：
- **经理（Manager）**：高层管理人员，固定月薪。
- **技术人员（Technician）**：技术支持角色，按小时计薪。
- **销售经理（SalesManager）**：管理销售团队，固定月薪 + 部门销售提成。
- **推销员（Salesman）**：一线销售，按销售额提成。

系统需支持：
- 员工信息录入（包括编号、姓名、级别、特定数据如工作小时或销售额）。
- 自动计算月薪（基于级别和特定规则）。
- 月度薪资发放（更新薪资记录）。
- 生成工资统计报表（显示所有员工的详细信息和总额）。

### 2.2 功能需求
系统采用菜单驱动的命令行界面，主菜单包括以下选项：
1. **输入员工信息（inputInfo()）**：
   - 批量或单个录入员工数据。
   - 输入内容：员工类型（选择1-4）、姓名、特定数据（e.g., 技术人员的工作小时、推销员的月销售额、销售经理的部门销售额）。
   - 自动生成编号（从2001起，静态计数器递增）。
   - 自动设置级别：经理=4级，技术人员=3级，销售经理=2级，推销员=1级。
   - 数据验证：姓名非空，数值输入为正数，类型选择有效。
   - 存储：使用vector<Person*>动态数组管理员工对象指针；数据以文件形式保存（e.g., "employees.txt"，格式：编号|姓名|类型|级别|薪资|特定数据）。

2. **月薪发放（monthPay()）**：
   - 遍历所有员工，调用每个员工的pay()虚函数计算并更新当月薪资。
   - 输出发放日志（e.g., "已为[姓名]发放[金额]元"）。
   - 更新文件存储。

3. **显示工资报表（showSalary()）**：
   - 生成表格格式输出：列包括编号、姓名、类型、级别、当月薪资。
   - 底部汇总：总员工数、总薪资金额。
   - 使用cout格式化输出（e.g., 表格边框用'-'和'|'）。

4. **退出系统**：保存数据并结束程序。

### 2.3 非功能需求
- **性能**：支持最多100名员工，响应时间<1秒。
- **可用性**：界面简洁，提示清晰，支持重试输入。
- **可靠性**：异常处理（e.g., 文件读写失败时提示并退出）。
- **可维护性**：代码模块化，使用虚函数实现多态。
- **安全性**：无敏感数据加密（适用于内部使用）。
- **国际化**：中文界面和输出。

### 2.4 数据需求
- **实体**：
  - Person：编号(int)、姓名(string)、级别(int)、薪资(double)。
  - Manager：继承Person，无额外数据。
  - Technician：继承Person，额外：月工作小时(double)。
  - Salesman：继承Person，额外：月销售额(double)。
  - SalesManager：多重继承Manager和Salesman，额外：部门销售额(double)。
- **计算规则**：
  - 经理：固定18000元。
  - 技术人员：小时工资100元 * 月工作小时。
  - 推销员：月销售额 * 4%。
  - 销售经理：固定5000元 + 部门销售额 * 2%。
- **存储格式**：纯文本文件，每行一条记录，用'|'分隔字段。加载时从文件读取创建对象。

### 2.5 用户界面规格
- 命令行菜单示例：
  ```
  === 公司薪酬管理系统 ===
  1. 输入员工信息
  2. 月薪发放
  3. 显示工资报表
  4. 退出
  请选择(1-4):
  ```
- 输入提示：e.g., "请输入员工类型(1:经理,2:技术人员,3:销售经理,4:推销员):"
- 输出报表示例：
  ```
  +------+--------+----------+--------+----------+
  | 编号 | 姓名   | 类型     | 级别   | 薪资(元)|
  +------+--------+----------+--------+----------+
  | 2001 | 张三   | 经理     | 4      | 18000.00|
  ...
  +------+--------+----------+--------+----------+
  总员工数: 5, 总薪资: 50000.00 元
  ```

## 3. 开发环境规格

### 3.1 软件环境
- **IDE**：Dev C++（版本5.11或更高，支持Windows）。
- **编译器**：g++（MinGW）。
- **库**：标准C++库（<iostream>、<vector>、<string>、<fstream>、<iomanip>）。
- **操作系统**：Windows 10/11（命令行支持UTF-8编码以显示中文）。

### 3.2 硬件环境
- **最低配置**：Intel Core i3处理器、4GB RAM、200GB HDD。
- **推荐配置**：8GB RAM、SSD存储，确保Dev C++流畅运行。
- **外围设备**：标准键盘/鼠标，无特殊要求。

### 3.3 开发工具链
- 版本控制：可选使用Git（但非必须）。
- 测试工具：手动单元测试（e.g., 测试pay()函数）和集成测试。

## 4. 详细设计规格

### 4.1 架构设计
- **整体架构**：MVC-like（Model: Person类及其派生；View: 菜单和报表输出；Controller: 主函数和菜单逻辑）。
- **数据结构**：std::vector<Person*> employees;（动态管理员工指针，支持多态）。
- **文件I/O**：使用std::fstream读写"employees.txt"。

### 4.2 类设计
采用OOP原则：基类+派生类+多重继承+虚函数实现多态。

#### 4.2.1 基类：Person
- **成员变量**（protected）：
  - int id; // 职工编号
  - std::string name; // 姓名
  - int level; // 级别
  - double salary; // 当月薪水
- **静态成员**：
  - static int count; // 当前员工数，用于生成id = 2000 + count;
- **构造函数**：
  - Person(std::string n, int l) : name(n), level(l), id(2000 + ++count), salary(0) {}
- **虚函数**：
  - virtual void pay() = 0; // 纯虚，子类实现薪资计算
  - virtual double getSalary() const { return salary; } // 返回薪资
- **其他方法**：
  - void setLevel(int l) { level = l; }
  - std::string getName() const { return name; }
  - int getId() const { return id; }
  - int getLevel() const { return level; }

#### 4.2.2 派生类：Manager（继承Person）
- **构造函数**：Manager(std::string n) : Person(n, 4) {}
- **重写**：
  - void pay() override { salary = 18000.0; }
- **析构**：virtual ~Manager() {}

#### 4.2.3 派生类：Technician（继承Person）
- **成员变量**（protected）：double hours; // 月工作小时
- **构造函数**：Technician(std::string n, double h) : Person(n, 3), hours(h) {}
- **重写**：
  - void pay() override { salary = hours * 100.0; }
- **getter**：double getHours() const { return hours; }

#### 4.2.4 派生类：Salesman（继承Person）
- **成员变量**（protected）：double sales; // 月销售额
- **构造函数**：Salesman(std::string n, double s) : Person(n, 1), sales(s) {}
- **重写**：
  - void pay() override { salary = sales * 0.04; }
- **getter**：double getSales() const { return sales; }

#### 4.2.5 多重继承类：SalesManager（继承Manager和Salesman，虚基类避免二义性）
- **成员变量**（protected）：double deptSales; // 部门销售额
- **构造函数**：SalesManager(std::string n, double ds, double s) : Person(n, 2), Manager(n), Salesman(n, s), deptSales(ds) {}
  - 注意：使用虚继承 virtual Manager, virtual Salesman; 以避免菱形继承问题。
- **重写**：
  - void pay() override { salary = 5000.0 + deptSales * 0.02; } // 覆盖Manager的pay
- **getter**：double getDeptSales() const { return deptSales; }
- **析构**：virtual ~SalesManager() {}

### 4.3 其他模块设计
- **主函数（main()）**：
  - 加载文件数据到vector。
  - 循环显示菜单，调用inputInfo()、monthPay()、showSalary()。
  - 退出时保存数据，清理内存（delete每个指针）。
- **inputInfo()**：提示输入，new对应对象，push_back到vector，保存文件。
- **monthPay()**：for循环调用每个元素的pay()，输出日志。
- **showSalary()**：使用std::setw格式化表格，计算总和。
- **文件操作**：
  - saveToFile()：遍历vector，写入文件。
  - loadFromFile()：读取文件，new对象并push_back。

### 4.4 类层次结构
```
          Person (基类)
             |
    +--------+---------+
    |                   |
 Manager (单继承)   Technician (单继承)
    |                   |
    +-------------------+
             |
      SalesManager (多重继承: Manager + Salesman)
             |
        Salesman (单继承, 与SalesManager共享)
```
- 使用虚函数pay()和getSalary()实现动态绑定。

### 4.5 算法设计
- 薪资计算：O(n)遍历vector。
- 文件读写：逐行解析，使用stringstream分割字段。
- 错误处理：try-catch文件异常，输入验证用cin.fail()。

## 5. 工程进度计划

### 5.1 总体进度
- **总时长**：2周（从分析到提交）。
- **里程碑**：需求分析完成（Day1）、类设计&编码（Day3-7）、测试&优化（Day8-10）、报告撰写（Day11-13）。

### 5.2 详细进度表
使用表格表示：

| 时间点       | 计划完成的工作                                                                 | 实际完成情况（开发时填写）                  | 负责人/备注 |
|--------------|-------------------------------------------------------------------------------|--------------------------------------------|-------------|
| Week1 Day1  | 完成对程序的分析与设计（需求文档、类图绘制）                                   | 已完成，制定详细计划。                     | 开发者     |
| Week1 Day2-4| 编写基类Person和派生类（Manager, Technician, Salesman, SalesManager）           | 编写并初步调试，虚函数多态正常。            | 开发者     |
| Week1 Day5  | 编写主函数和菜单显示逻辑                                                     | 菜单交互实现，基本循环无bug。              | 开发者     |
| Week1 Day6-7| 编写批量输入inputInfo()、月付薪monthPay()、报表showSalary()函数                | 函数集成，调用后功能正常，文件I/O测试通过。| 开发者     |
| Week2 Day1-2| 依据算法优化，并根据美观程度修改程序（e.g., 表格格式、输入验证）               | 代码重构，提升可读性，添加异常处理。       | 开发者     |
| Week2 Day3  | 对程序进行全面检查、调试，并生成测试截图                                     | 全功能测试通过，截图5-6张。                | 开发者     |
| Week2 Day4-5| 填写实验报告（包括小结、操作说明）                                           | 报告完成，包含经验教训。                   | 开发者     |
| Week2 Day6  | 最终打包（源代码+数据文件+报告），提交                                       | 按时提交。                                 | 开发者     |

- **风险管理**：如果文件I/O问题，备用全局数组Person* per[100];。进度延误时优先核心功能。

## 6. 测试和运行规格

### 6.1 测试策略
- **单元测试**：单独测试每个pay()（e.g., Manager pay()==18000）。
- **集成测试**：菜单流程、文件读写循环。
- **系统测试**：端到端（输入5员工、发放、报表、退出）。
- **边界测试**：0员工、最大100员工、负输入（应拒绝）。

### 6.2 测试用例
1. **正常输入**：添加经理，pay()后salary=18000，报表显示正确。
2. **多类型混合**：添加所有类型，计算总薪资准确。
3. **文件持久化**：重启程序，数据加载完整。
4. **异常**：无效输入，提示"输入错误，请重试"。

### 6.3 运行需注意事项
- 编译：Dev C++中F9编译，F10运行。
- 编码：保存为UTF-8，避免中文乱码。
- 数据文件：运行前确保"employees.txt"可写权限。
- 内存管理：退出时for循环delete employees[i];。

### 6.4 预期运行截图
- 主菜单界面。
- 输入员工过程（提示&确认）。
- 发放薪资日志。
- 工资报表表格。
- 文件加载验证（e.g., 控制台输出"加载X员工"）。
- 至少5张截图，覆盖核心功能。

## 7. 交付物和提交要求

### 7.1 交付物
- **源代码**：单一.cpp文件（所有类&函数集成，便于检查）。包含头文件守卫、命名规范（e.g., camelCase）。
- **数据文件**：示例"employees.txt"（测试用数据）。
- **实验报告**：Word/PDF，包含：
  - 操作说明（如何运行、菜单使用）。
  - 个人小结：
    - **经验**：继承减少代码重复；vector简化管理；虚函数实现多态，提升扩展性。
    - **教训**：多重继承需注意虚基类，避免二义性；文件I/O易受路径影响。
    - **创新**：添加输入历史记录（可选）。
    - **改进**：未来集成GUI或数据库。
- **其他**：类层次图（文本或手绘）、测试截图。

### 7.2 提交规范
- **截止时间**：2025年10月29日 晚12:00前（当前日期10月26日，留足时间）。
- **方式**：ZIP压缩包，命名"学号-姓名.zip"，邮件附件发送至对应邮箱（基于学号区间）：
  - 21311473-24336012: fengwb6@mail2.sysu.edu.cn
  - 24336013-24336072: chenzhm39@mail2.sysu.edu.cn
  - 24336073-24336129: zouxy28@mail2.sysu.edu.cn
  - 24336130-24952080: yehzh8@mail2.sysu.edu.cn
- **文件结构**：ZIP内根目录下source.cpp、employees.txt、report.pdf、screenshots/文件夹（含PNG/JPG）。

### 7.3 评分标准（参考60-100分）
- **基本要求（80-95分）**：核心功能实现（输入、计算、报表、文件存储），代码运行无崩溃。
- **加分项**（+5-15分）：完美多态、STL使用优雅、界面美观、报告详尽、异常处理完整。
- **扣分项**：无文件存储(-10)、多态未用(-15)、代码不规范(-5)、逾期(-20)。
- **知识点覆盖**：类封装(必)、继承(必)、虚函数/多态(必)、STL vector(必)、文件I/O(必)。

本要求文档基于提供的PPT内容全面提炼，确保开发过程清晰、可执行。如需澄清或调整，随时反馈。开发时建议先绘制类图草稿，再编码。
